import * as Rx from 'rxjs';
import { parseRequestError } from 'utils/request/error';
import { isActionOf } from 'states/utils/action';
import * as actions from 'states/applications/actions';
import search from 'api/applications';
export const fetchEpic = action$ => (action$
    .filter(isActionOf(actions.applicationsFetch))
    .mergeMap(({ payload }) => (Rx.Observable.concat(Rx.Observable.of(actions.applicationsFetchLoading()), Rx.Observable.fromPromise(search.get(payload))
    .mergeMap(response => (Rx.Observable.concat(Rx.Observable.of(actions.applicationsReceive(response)), Rx.Observable.of(actions.applicationsFetchSuccess()))))
    .catch((requestError) => (Rx.Observable.fromPromise(parseRequestError(requestError)
    .then(error => actions.applicationsFetchFailure(error))
    .catch(error => actions.applicationsFetchFailure(error)))))))));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tlaXN1a2VraWRvL3Byb2plY3RzL2l0dW5lc0ZldGNoZXIvc3JjL3N0YXRlcy9hcHBsaWNhdGlvbnMvZXBpYy9mZXRjaC9pbmRleC50cyIsIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUkzQixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFHakQsT0FBTyxLQUFLLE9BQU8sTUFBTSw2QkFBNkIsQ0FBQztBQUN2RCxPQUFPLE1BQU0sTUFBTSxrQkFBa0IsQ0FBQztBQUl0QyxNQUFNLENBQUMsTUFBTSxTQUFTLEdBSWxCLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FDYixPQUFPO0tBQ0osTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztLQUM3QyxRQUFRLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUN6QixFQUFFLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FDbEIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLHdCQUF3QixFQUFFLENBQUMsRUFDcEQsRUFBRSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztLQUMzQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUNwQixFQUFFLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FDbEIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQ3ZELEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyx3QkFBd0IsRUFBRSxDQUFDLENBQ3JELENBQ0YsQ0FBQztLQUNELEtBQUssQ0FBQyxDQUFDLFlBQTBCLEVBQUUsRUFBRSxDQUFDLENBQ3JDLEVBQUUsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLGlCQUFpQixDQUFDLFlBQVksQ0FBQztLQUN0RCxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDdEQsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLHdCQUF3QixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQ3pELENBQ0YsQ0FBQyxDQUNMLENBQ0YsQ0FBQyxDQUNMLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tlaXN1a2VraWRvL3Byb2plY3RzL2l0dW5lc0ZldGNoZXIvc3JjL3N0YXRlcy9hcHBsaWNhdGlvbnMvZXBpYy9mZXRjaC9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSeCBmcm9tICdyeGpzJztcbmltcG9ydCB7IEVwaWMgfSBmcm9tICdyZWR1eC1vYnNlcnZhYmxlJztcbmltcG9ydCB7IEFjdGlvbnNPZiB9IGZyb20gJ3R5cGVzL3N0YXRlJztcbmltcG9ydCB7IFJlcXVlc3RFcnJvciB9IGZyb20gJ3R5cGVzL3JlcXVlc3QnO1xuaW1wb3J0IHsgcGFyc2VSZXF1ZXN0RXJyb3IgfSBmcm9tICd1dGlscy9yZXF1ZXN0L2Vycm9yJztcbmltcG9ydCB7IGlzQWN0aW9uT2YgfSBmcm9tICdzdGF0ZXMvdXRpbHMvYWN0aW9uJztcbmltcG9ydCB7IFJvb3RTdGF0ZSB9IGZyb20gJ3N0YXRlcy9yb290L3JlZHVjZXInO1xuaW1wb3J0IHsgUm9vdEFjdGlvbnMgfSBmcm9tICdzdGF0ZXMvcm9vdC9hY3Rpb25zJztcbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSAnc3RhdGVzL2FwcGxpY2F0aW9ucy9hY3Rpb25zJztcbmltcG9ydCBzZWFyY2ggZnJvbSAnYXBpL2FwcGxpY2F0aW9ucyc7XG5cbnR5cGUgQWN0aW9ucyA9IEFjdGlvbnNPZjx0eXBlb2YgYWN0aW9ucz47XG5cbmV4cG9ydCBjb25zdCBmZXRjaEVwaWM6IEVwaWM8XG4gIFJvb3RBY3Rpb25zLFxuICBBY3Rpb25zLFxuICBSb290U3RhdGVcbj4gPSBhY3Rpb24kID0+IChcbiAgYWN0aW9uJFxuICAgIC5maWx0ZXIoaXNBY3Rpb25PZihhY3Rpb25zLmFwcGxpY2F0aW9uc0ZldGNoKSlcbiAgICAubWVyZ2VNYXAoKHsgcGF5bG9hZCB9KSA9PiAoXG4gICAgICBSeC5PYnNlcnZhYmxlLmNvbmNhdDxBY3Rpb25zPihcbiAgICAgICAgUnguT2JzZXJ2YWJsZS5vZihhY3Rpb25zLmFwcGxpY2F0aW9uc0ZldGNoTG9hZGluZygpKSxcbiAgICAgICAgUnguT2JzZXJ2YWJsZS5mcm9tUHJvbWlzZShzZWFyY2guZ2V0KHBheWxvYWQpKVxuICAgICAgICAgIC5tZXJnZU1hcChyZXNwb25zZSA9PiAoXG4gICAgICAgICAgICBSeC5PYnNlcnZhYmxlLmNvbmNhdDxBY3Rpb25zPihcbiAgICAgICAgICAgICAgUnguT2JzZXJ2YWJsZS5vZihhY3Rpb25zLmFwcGxpY2F0aW9uc1JlY2VpdmUocmVzcG9uc2UpKSxcbiAgICAgICAgICAgICAgUnguT2JzZXJ2YWJsZS5vZihhY3Rpb25zLmFwcGxpY2F0aW9uc0ZldGNoU3VjY2VzcygpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICkpXG4gICAgICAgICAgLmNhdGNoKChyZXF1ZXN0RXJyb3I6IFJlcXVlc3RFcnJvcikgPT4gKFxuICAgICAgICAgICAgUnguT2JzZXJ2YWJsZS5mcm9tUHJvbWlzZShwYXJzZVJlcXVlc3RFcnJvcihyZXF1ZXN0RXJyb3IpXG4gICAgICAgICAgICAgIC50aGVuKGVycm9yID0+IGFjdGlvbnMuYXBwbGljYXRpb25zRmV0Y2hGYWlsdXJlKGVycm9yKSlcbiAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGFjdGlvbnMuYXBwbGljYXRpb25zRmV0Y2hGYWlsdXJlKGVycm9yKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApKVxuICAgICAgKVxuICAgICkpXG4pO1xuXG4iXSwidmVyc2lvbiI6M30=