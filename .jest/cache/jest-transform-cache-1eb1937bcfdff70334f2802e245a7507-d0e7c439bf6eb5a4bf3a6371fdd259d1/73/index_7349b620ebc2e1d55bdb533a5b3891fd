97761659464a28fe0048464060c452ea
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fetchEpic = void 0;

var Rx = _interopRequireWildcard(require("rxjs"));

var _error = require("../../../../utils/request/error");

var _action = require("../../../utils/action");

var actions = _interopRequireWildcard(require("../../actions"));

var _applications = _interopRequireDefault(require("../../../../api/applications"));

var fetchEpic = function fetchEpic(action$) {
  return action$.filter((0, _action.isActionOf)(actions.applicationsFetch)).mergeMap(function (_ref) {
    var payload = _ref.payload;
    return Rx.Observable.concat(Rx.Observable.of(actions.applicationsFetchLoading()), Rx.Observable.fromPromise(_applications.default.get(payload)).mergeMap(function (response) {
      return Rx.Observable.concat(Rx.Observable.of(actions.applicationsReceive(response)), Rx.Observable.of(actions.applicationsFetchSuccess()));
    }).catch(function (requestError) {
      return Rx.Observable.fromPromise((0, _error.parseRequestError)(requestError).then(function (error) {
        return actions.applicationsFetchFailure(error);
      }).catch(function (error) {
        return actions.applicationsFetchFailure(error);
      }));
    }));
  });
};

exports.fetchEpic = fetchEpic;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rZWlzdWtla2lkby9wcm9qZWN0cy9pdHVuZXNGZXRjaGVyL3NyYy9zdGF0ZXMvYXBwbGljYXRpb25zL2VwaWMvZmV0Y2gvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBSUE7O0FBQ0E7O0FBR0E7O0FBQ0E7O0FBSU8sSUFBTSxTQUFTLEdBSWxCLFNBSlMsU0FJVCxDQUFBLE9BQU87QUFBQSxTQUNULE9BQU8sQ0FDSixNQURILENBQ1Usd0JBQVcsT0FBTyxDQUFDLGlCQUFuQixDQURWLEVBRUcsUUFGSCxDQUVZO0FBQUEsUUFBRyxPQUFILFFBQUcsT0FBSDtBQUFBLFdBQ1IsRUFBRSxDQUFDLFVBQUgsQ0FBYyxNQUFkLENBQ0UsRUFBRSxDQUFDLFVBQUgsQ0FBYyxFQUFkLENBQWlCLE9BQU8sQ0FBQyx3QkFBUixFQUFqQixDQURGLEVBRUUsRUFBRSxDQUFDLFVBQUgsQ0FBYyxXQUFkLENBQTBCLHNCQUFPLEdBQVAsQ0FBVyxPQUFYLENBQTFCLEVBQ0csUUFESCxDQUNZLFVBQUEsUUFBUTtBQUFBLGFBQ2hCLEVBQUUsQ0FBQyxVQUFILENBQWMsTUFBZCxDQUNFLEVBQUUsQ0FBQyxVQUFILENBQWMsRUFBZCxDQUFpQixPQUFPLENBQUMsbUJBQVIsQ0FBNEIsUUFBNUIsQ0FBakIsQ0FERixFQUVFLEVBQUUsQ0FBQyxVQUFILENBQWMsRUFBZCxDQUFpQixPQUFPLENBQUMsd0JBQVIsRUFBakIsQ0FGRixDQURnQjtBQUFBLEtBRHBCLEVBT0csS0FQSCxDQU9TLFVBQUMsWUFBRDtBQUFBLGFBQ0wsRUFBRSxDQUFDLFVBQUgsQ0FBYyxXQUFkLENBQTBCLDhCQUFrQixZQUFsQixFQUN2QixJQUR1QixDQUNsQixVQUFBLEtBQUs7QUFBQSxlQUFJLE9BQU8sQ0FBQyx3QkFBUixDQUFpQyxLQUFqQyxDQUFKO0FBQUEsT0FEYSxFQUV2QixLQUZ1QixDQUVqQixVQUFBLEtBQUs7QUFBQSxlQUFJLE9BQU8sQ0FBQyx3QkFBUixDQUFpQyxLQUFqQyxDQUFKO0FBQUEsT0FGWSxDQUExQixDQURLO0FBQUEsS0FQVCxDQUZGLENBRFE7QUFBQSxHQUZaLENBRFM7QUFBQSxDQUpKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUnggZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBFcGljIH0gZnJvbSAncmVkdXgtb2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBBY3Rpb25zT2YgfSBmcm9tICd0eXBlcy9zdGF0ZSc7XG5pbXBvcnQgeyBSZXF1ZXN0RXJyb3IgfSBmcm9tICd0eXBlcy9yZXF1ZXN0JztcbmltcG9ydCB7IHBhcnNlUmVxdWVzdEVycm9yIH0gZnJvbSAndXRpbHMvcmVxdWVzdC9lcnJvcic7XG5pbXBvcnQgeyBpc0FjdGlvbk9mIH0gZnJvbSAnc3RhdGVzL3V0aWxzL2FjdGlvbic7XG5pbXBvcnQgeyBSb290U3RhdGUgfSBmcm9tICdzdGF0ZXMvcm9vdC9yZWR1Y2VyJztcbmltcG9ydCB7IFJvb3RBY3Rpb25zIH0gZnJvbSAnc3RhdGVzL3Jvb3QvYWN0aW9ucyc7XG5pbXBvcnQgKiBhcyBhY3Rpb25zIGZyb20gJ3N0YXRlcy9hcHBsaWNhdGlvbnMvYWN0aW9ucyc7XG5pbXBvcnQgc2VhcmNoIGZyb20gJ2FwaS9hcHBsaWNhdGlvbnMnO1xuXG50eXBlIEFjdGlvbnMgPSBBY3Rpb25zT2Y8dHlwZW9mIGFjdGlvbnM+O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hFcGljOiBFcGljPFxuICBSb290QWN0aW9ucyxcbiAgQWN0aW9ucyxcbiAgUm9vdFN0YXRlXG4+ID0gYWN0aW9uJCA9PiAoXG4gIGFjdGlvbiRcbiAgICAuZmlsdGVyKGlzQWN0aW9uT2YoYWN0aW9ucy5hcHBsaWNhdGlvbnNGZXRjaCkpXG4gICAgLm1lcmdlTWFwKCh7IHBheWxvYWQgfSkgPT4gKFxuICAgICAgUnguT2JzZXJ2YWJsZS5jb25jYXQ8QWN0aW9ucz4oXG4gICAgICAgIFJ4Lk9ic2VydmFibGUub2YoYWN0aW9ucy5hcHBsaWNhdGlvbnNGZXRjaExvYWRpbmcoKSksXG4gICAgICAgIFJ4Lk9ic2VydmFibGUuZnJvbVByb21pc2Uoc2VhcmNoLmdldChwYXlsb2FkKSlcbiAgICAgICAgICAubWVyZ2VNYXAocmVzcG9uc2UgPT4gKFxuICAgICAgICAgICAgUnguT2JzZXJ2YWJsZS5jb25jYXQ8QWN0aW9ucz4oXG4gICAgICAgICAgICAgIFJ4Lk9ic2VydmFibGUub2YoYWN0aW9ucy5hcHBsaWNhdGlvbnNSZWNlaXZlKHJlc3BvbnNlKSksXG4gICAgICAgICAgICAgIFJ4Lk9ic2VydmFibGUub2YoYWN0aW9ucy5hcHBsaWNhdGlvbnNGZXRjaFN1Y2Nlc3MoKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApKVxuICAgICAgICAgIC5jYXRjaCgocmVxdWVzdEVycm9yOiBSZXF1ZXN0RXJyb3IpID0+IChcbiAgICAgICAgICAgIFJ4Lk9ic2VydmFibGUuZnJvbVByb21pc2UocGFyc2VSZXF1ZXN0RXJyb3IocmVxdWVzdEVycm9yKVxuICAgICAgICAgICAgICAudGhlbihlcnJvciA9PiBhY3Rpb25zLmFwcGxpY2F0aW9uc0ZldGNoRmFpbHVyZShlcnJvcikpXG4gICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiBhY3Rpb25zLmFwcGxpY2F0aW9uc0ZldGNoRmFpbHVyZShlcnJvcikpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSlcbiAgICAgIClcbiAgICApKVxuKTtcblxuIl19